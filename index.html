<!DOCTYPE html> 
<html lang="en-us"> 
  <head>  
    <meta charset="utf-8">  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Unity WebGL Player | WebShop_Game</title>  
    <link rel="shortcut icon" href="TemplateData/favicon.ico">  
    <link rel="stylesheet" href="TemplateData/style.css"> 
    <link rel="preconnect" href="https://fonts.gstatic.com">  
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap" rel="stylesheet">  
  </head> 
  <body>  
    <div id="unity-container" class="unity-desktop">  
      <canvas id="unity-canvas"></canvas> 
      <div id="unity-loading-bar">  
        <div id="unity-logo"></div> 
        <div id="unity-progress-bar-empty"> 
          <div id="unity-progress-bar-full"></div>  
        </div>  
      </div>  
      <div id="unity-footer"> 
        <div id="unity-webgl-logo"></div> 
        <div id="unity-fullscreen-button"></div>  
        <div id="unity-build-title">WebShop_Game</div>  
      </div>  
    </div>  
    <script>  
      var buildUrl = "Build"; 
      var loaderUrl = buildUrl + "/Build.loader.js";  
      var config = {  
        dataUrl: buildUrl + "/Build.data.unityweb", 
        frameworkUrl: buildUrl + "/Build.framework.js.unityweb",  
        codeUrl: buildUrl + "/Build.wasm.unityweb", 
        streamingAssetsUrl: "StreamingAssets",  
        companyName: "DefaultCompany",  
        productName: "WebShop_Game",  
        productVersion: "1.0",  
      };  
      var container = document.querySelector("#unity-container"); 
      var canvas = document.querySelector("#unity-canvas"); 
      var loadingBar = document.querySelector("#unity-loading-bar");  
      var progressBarFull = document.querySelector("#unity-progress-bar-full"); 
      var fullscreenButton = document.querySelector("#unity-fullscreen-button");  
      if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {  
        container.className = "unity-mobile"; 
        config.devicePixelRatio = 3;  
        canvas.style.position = "absolute";
      } else {  
        canvas.style.width = "450px"; 
        canvas.style.height = "812px";  
      
      } 
      loadingBar.style.display = "block"; 
    var handle; 
      var script = document.createElement("script");  
      script.src = loaderUrl; 
      script.onload = () => { 
        createUnityInstance(canvas, config, (progress) => { 
          progressBarFull.style.width = 100 * progress + "%"; 
        }).then((unityInstance) => {  
          loadingBar.style.display = "none";  
        
      handle = unityInstance; 
          fullscreenButton.onclick = () => {  
            unityInstance.SetFullscreen(1); 
          };  
        }).catch((message) => { 
          alert(message); 
        }); 
      };  
      document.body.appendChild(script);  
    </script> 
  <script>    
   
    function FixInputOnSubmit() {  
      event.preventDefault(); 
      console.log("test");  
    } 
      
    function Blur(){  
    console.log("blurred"); 
    }     
      
    function OnInput(){ 
      handle.SendMessage('_WebGLKeyboard', 'ReceiveInputChange', document.getElementById("fixInput").value);  
    }   
  </script> 
  <div> 
        <style type="text/css">
        body {
            display:flex;
            align-items: top;
            justify-content: center;
        }
        button {
            margin-top: 10px;
        }
        dialog {
            padding-left: 10px;
            padding-right: 10px;
            text-align: center;
        }
        
    </style>


  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

  <body>
    <style>
    .swal2-title {
      font-weight: 400;
      font-family: 'Roboto Slab', serif;
      color: black;
    }
    .swal2-input {
      border: none; 
      border-radius: 0px; 
      box-shadow: none; 
      border-bottom: 2px solid #AC1A2F; 
      text-align: center; 
      height: 2em; 
      text-transform: uppercase;
      width: 100%;
      font-family: 'Roboto Slab', serif;
      font-size: 16px;
      margin: 0.25em auto;
    }
    .swal2-styled.swal2-confirm {
      background-color: #AC1A2F;
      padding: 0.5em 2em;
      text-transform: uppercase;
      font-family: 'Roboto Slab', serif;
      font-size: 24px;
      border-radius: 0px;
      font-weight: 400;
    }
  </style>
  <body>  
    <script>  
      async function openDialog() { 
        const { value: formValues } = await Swal.fire({ 

            position : 'top', 
            allowOutsideClick: false,
            title: 'Enter your details',  
            html: 
            '</label><input id="firstName" type="text" name="firstname" placeholder="First name" class="swal2-input">' +  
            '</label><input id="lastName" name="lastname" placeholder="Last name" class="swal2-input">' + 
            '</label><input id="email" name="email" type="email" placeholder="email" class="swal2-input">' +
            '</label><input id="phone" name="phone" type="tel" placeholder="phone" class="swal2-input">' +
            '</label><input id="address" name="address" type="text" placeholder="address" class="swal2-input">', 
            //focusConfirm: false,  
            showConfirmButton: true,  
            confirmButtonText: "Submit",  
            preConfirm: () => { 
              let mailRegex = "^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$" 
              if (!(document.getElementById("firstName").value && 
                    document.getElementById("lastName").value &&
                    document.getElementById("phone").value &&
                    document.getElementById("email").value
                    && (document.getElementById("email").value) && document.getElementById("email").value.match(mailRegex))){ 
                Swal.showValidationMessage("Please fill out all required fields correctly");}   
              else{ 
                              return [  
                document.getElementById("firstName").value, 
                document.getElementById("lastName").value,  
                document.getElementById("email").value, 
                document.getElementById("phone").value,
                document.getElementById("address").value
              ];  
              } 
          },  
        }); 
        if (formValues) { 
          var player = JSON.stringify(  
          { 
            name : formValues[0], 
            surname : formValues[1],  
            mail : formValues[2],
            phoneNumber : formValues[3],
            address : formValues[4]  
      }); 
      handle.SendMessage('CONTENT MANAGER', 'ReceivePlayerData', player);

        document.body.style.zoom = 1.0;
        } 
      } 
      function openWebsite(url){  
        console.log(url); 
        var win = window.open(url, '_blank'); 
        win.focus();  
      } 
      function sendDBPath(){  
        handle.SendMessage('CONTENT MANAGER', 'ReceiveDBPath', "https://clwg.herokuapp.com/");  
      } 
        
      function OnInput(){ 
        var player = JSON.stringify(  
          { 
            name : document.getElementById("name").value, 
            surname : document.getElementById("lastname").value,  
            mail : document.getElementById("email").value 
      }); 
      handle.SendMessage('CONTENT MANAGER', 'ReceivePlayerData', player); 
      dialog.open = false;  
    } 
      let dialog = document.getElementById("dialog"); 
    </script> 
  </body> 
</html> 
